# HTML Carousel Component (Ragam Textiles)

## Overview

This document provides a brief overview and usage guide for the custom HTML carousel component implemented for Ragam Textiles. It's designed to be responsive, accessible, and configurable.

## HTML Structure

The basic HTML structure required to instantiate the carousel should generally follow this pattern (as used in `index.html`):

```html
<div class="featured-products"> <!-- Or any parent container -->
    <h2>Featured Collections</h2> <!-- Example title -->
    {% if slides and slides|length > 0 %} <!-- Backend check for slides -->
    <div class="carousel-container">
        <div class="carousel-wrapper">
            <div class="carousel-track">
                <!-- Slides are dynamically populated by the backend -->
                {% for slide in slides %}
                <div class="carousel-slide">
                    <img src="{{ slide.image_url }}" alt="{{ slide.caption if slide.caption else 'Carousel Image ' ~ loop.index }}">
                    {% if slide.caption %}
                    <div class="carousel-caption-text">{{ slide.caption }}</div>
                    {% endif %}
                </div>
                {% endfor %}
            </div>
        </div>
        <button class="carousel-btn prev-btn" aria-label="Previous">←</button>
        <button class="carousel-btn next-btn" aria-label="Next">→</button>
        <div class="carousel-indicators">
            <!-- Indicators are dynamically generated by carousel.js -->
        </div>
        <div class="carousel-liveregion visually-hidden" aria-live="polite" aria-atomic="true">
            <!-- For screen reader announcements -->
        </div>
    </div>
    {% else %}
    <p>No featured items to display at the moment.</p>
    {% endif %}
</div>
```

**Key Classes:**

*   `.carousel-container`: Main container for the carousel. The JS targets this.
*   `.carousel-wrapper`: Helps with overflow and slide containment.
*   `.carousel-track`: Contains the slides and is transformed for movement.
*   `.carousel-slide`: Individual slide item.
*   `.carousel-btn`, `.prev-btn`, `.next-btn`: Navigation arrows.
*   `.carousel-indicators`: Container for navigation dots.
*   `.indicator`: Individual dot (generated by JS).
*   `.carousel-liveregion`: Visually hidden, for ARIA live announcements.
*   `.visually-hidden`: Standard class to hide elements from view but keep for screen readers.

## JavaScript Initialization

The carousel is initialized automatically when the DOM is loaded, by `static/js/carousel.js`. It looks for a `.carousel-container` element.

## Configuration

The carousel can be configured using a JavaScript object named `carouselConfig`. If `window.carouselConfig` is defined *before* `carousel.js` is loaded, it will merge with the default settings. Otherwise, default settings are used.

**Default `carouselConfig`:**

```javascript
const defaultConfig = {
    autoPlay: true,
    autoPlayInterval: 3000,       // milliseconds
    pauseOnHover: true,           // Pause auto-play when mouse is over carousel
    infiniteLoop: true,           // Loop from last to first slide and vice-versa
    showIndicators: true,         // Display dot indicators
    showArrows: true,             // Display previous/next arrow buttons
    slidesToShow: 1,              // Default number of slides visible (mobile-first)
    slidesToScroll: 1,            // Number of slides to move on arrow click/swipe
    responsive: [                 // Settings for different breakpoints (largest to smallest)
        { breakpoint: 1440, slidesToShow: 4 }, // Large Desktop
        { breakpoint: 1024, slidesToShow: 3 }, // Desktop
        { breakpoint: 768, slidesToShow: 2 }   // Tablet
        // Add more breakpoints as needed. The script picks the first match from largest.
    ]
};
```

**To customize (example in an HTML template before script inclusion):**

```html
<script>
    window.carouselConfig = {
        autoPlay: false,
        slidesToShow: 2,
        responsive: [
            { breakpoint: 1200, slidesToShow: 4 },
            { breakpoint: 992, slidesToShow: 3 },
            { breakpoint: 600, slidesToShow: 2 }
        ]
    };
</script>
<script src="{{ url_for('static', filename='js/carousel.js') }}"></script>
```
Any options not overridden will use their default values.

## CSS Styling

Core carousel styles are in `static/css/carousel.css`. These include:
*   Basic layout for container, wrapper, track, slides.
*   Styling for navigation arrows and indicators.
*   Responsive rules for hiding/showing elements or adjusting layout (though `slidesToShow` is JS-driven).
*   Accessibility considerations like `visually-hidden` and `prefers-reduced-motion`.

Theming (colors, fonts) should primarily be handled by the main site stylesheet (`style.css`) by overriding selectors in `carousel.css` or using more specific selectors if needed.

## Accessibility Features

*   **ARIA Attributes:** Proper roles and ARIA attributes are used for buttons, indicators, and live regions.
*   **Keyboard Navigation:** Carousel can be navigated using Arrow keys (Left/Right), Tab, Enter, and Space.
*   **Focus Management:** Visible focus indicators are provided, and auto-play is paused when the carousel or its children gain focus.
*   **Screen Reader Announcements:** Slide changes are announced via an ARIA live region.
*   **Reduced Motion:** CSS respects `prefers-reduced-motion` to minimize animations.

## Dependencies

*   **Vanilla JavaScript:** No external JS libraries are required.
*   **CSS Variables:** Uses CSS variables defined in the main `style.css` for consistency (e.g., `--base-spacing-unit`, `--primary-color-light`).

## Troubleshooting

*   **Carousel not appearing:**
    *   Ensure `carousel.js` and `carousel.css` are correctly linked in `base.html`.
    *   Check the browser console for JavaScript errors.
    *   Verify the HTML structure in `index.html` matches the expected classes (`.carousel-container`, `.carousel-track`, etc.).
    *   Make sure there are slides being passed from the backend to `index.html`.
*   **Slides not displaying correctly:**
    *   Check `slidesToShow` configuration in `carouselConfig` and its responsive settings.
    *   Inspect slide `minWidth` and `maxWidth` styles in the browser's developer tools.
*   **Controls not working:**
    *   Ensure button classes (`.prev-btn`, `.next-btn`, `.indicator`) are correct.
    *   Check for JS errors.
```
